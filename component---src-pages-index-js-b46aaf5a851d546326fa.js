(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{191:function(e,t,r){"use strict";r.r(t);var a=r(0),n=r.n(a);var o=n.a.createContext({}),i=o.Provider,c=o.Consumer,d=function(e){var t,r;function a(){for(var t,r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(t=e.call.apply(e,[this].concat(a))||this).render=function(){return n.a.createElement(i,{value:t.props.imageData},t.props.children)},t}return r=e,(t=a).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r,a}(n.a.PureComponent),s=r(228),u=r(229),l=r.n(u);function p(e){var t=e.description,r=e.lang,a=e.meta,o=e.title,i=s.data.site,c=t||i.siteMetadata.description;return n.a.createElement(l.a,{htmlAttributes:{lang:r},title:o,titleTemplate:"%s",meta:[{name:"description",content:c},{property:"og:title",content:o},{property:"og:description",content:c},{property:"og:type",content:"website"},{name:"twitter:card",content:"summary"},{name:"twitter:creator",content:i.siteMetadata.author},{name:"twitter:title",content:o},{name:"twitter:description",content:c}].concat(a)})}p.defaultProps={lang:"zh-TW",meta:[],description:""};var g=p,m=r(235),h=r(213),f={GREY:"#dbd3ca",RED:"#a93d2d",YELLOW:"#c99d31",BLACK:"#4d4d4d",BLUE:"#6ca39f"};function y(){var e=function(e,t){t||(t=e.slice(0));return e.raw=t,e}(["\n  @import url('https://fonts.googleapis.com/css?family=DM+Serif+Text&display=swap');\n  body {\n    font-family: 'DM Serif Text', -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Open Sans', 'Helvetica Neue', sans-serif;\n    background-color: ",";\n  }\n"]);return y=function(){return e},e}var v=Object(h.createGlobalStyle)(y(),f.GREY),_=function(e){var t,r;function a(){for(var t,r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(t=e.call.apply(e,[this].concat(a))||this).render=function(){return n.a.createElement(n.a.Fragment,null,n.a.createElement(m.Normalize,null),n.a.createElement(v,null))},t}return r=e,(t=a).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r,a}(n.a.PureComponent),C=(r(94),r(142),r(66),r(13),r(51),r(41),r(29),r(39),r(199)),b=r(257),D=r.n(b);r(209);var S=function(e){var t,r;function a(){for(var t,r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(t=e.call.apply(e,[this].concat(a))||this).render=function(){return n.a.createElement(C.Rect,{x:t.props.x,y:t.props.y,width:100,height:150,cornerRadius:5,fill:"transparent",stroke:f.BLACK,strokeWidth:1,opacity:.2})},t}return r=e,(t=a).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r,a}(n.a.PureComponent);S.defaultProps={x:0,y:0};var E=S,w=(r(23),r(225),r(293)),x=r.n(w);r(222);var k=function(e){var t,r;function a(t){var r;return(r=e.call(this,t)||this).handleLoad=function(){r.setState({image:r.image}),r.image.removeEventListener("load",r.handleLoad),a.imageCache.set(r.props.name,r.image)},r.handleMoveOver=function(){document.body.style.cursor="pointer"},r.handleMoveOut=function(){document.body.style.cursor="default"},r.render=function(){var e=r.props,t=e.name,a=e.x,o=e.y,i=e.width,c=e.height,d=e.draggable,s=e.style;return n.a.createElement(C.Image,Object.assign({name:t,x:a,y:o,width:i,height:c,image:r.state.image,draggable:d,ref:function(e){r.imageNode=e}},d&&{onMouseOver:r.handleMoveOver,onMouseOut:r.handleMoveOut,onDragStart:function(){},onDragEnd:function(){}},s))},r.state={image:a.imageCache.get(t.name)||r.loadPlaceholder()},r}r=e,(t=a).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var o=a.prototype;return o.componentDidMount=function(){!1===a.imageCache.has(this.props.name)&&this.loadImage()},o.componentDidUpdate=function(e){var t=this;!1===a.imageCache.has(this.props.name)&&e.src!==this.props.src&&e.srcSet!==this.props.srcSet&&(this.loadImage(),this.props.base64&&this.setState(function(){return{placeholder:t.loadPlaceholder()}}))},o.loadPlaceholder=function(){if(!this.props.base64)return null;var e=new window.Image;return e.src=this.props.base64,e},o.loadImage=function(){this.image=new window.Image,this.image.src=this.props.src,this.image.srcSet=this.props.srcSet,this.image.addEventListener("load",this.handleLoad)},a}(n.a.PureComponent);k.defaultProps={x:0,y:0,draggable:!1},k.imageCache=new x.a({max:500,length:function(e,t){return t.length},maxAge:108e5});var P=k,O=32,A=6;var j=function(e){var t,r;function a(){for(var t,r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(t=e.call.apply(e,[this].concat(a))||this).render=function(){var e=t.props,r=e.id,a=e.x,o=e.y,i=e.draggable,c=t.props.imageData.childImageSharp.fixed,d=c.base64,s=c.width,u=c.height,l=c.src,p=c.srcSet;return n.a.createElement(P,{x:a,y:o,name:r,base64:d,width:s/2,height:u/2,src:l,srcSet:p,draggable:i,style:{shadowColor:"black",shadowOpacity:.3,shadowBlur:A,shadowOffsetY:2}})},t}return r=e,(t=a).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r,a}(n.a.PureComponent);j.defaultProps={x:0,y:0,draggable:!1};var I=function(e){return n.a.createElement(c,null,function(t){return n.a.createElement(j,Object.assign({imageData:t[e.id]},e))})};var z=function(e){var t,r;function a(){for(var t,r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(t=e.call.apply(e,[this].concat(a))||this).renderCell=function(e){var r=t.props["pos"+e+"Card"];return n.a.createElement(C.Group,{x:116*e,y:0},n.a.createElement(E,null),r&&n.a.createElement(I,{key:r.id,imageData:r.imageData}))},t.render=function(){return n.a.createElement(C.Group,{x:139,y:51},t.renderCell(0),t.renderCell(1),t.renderCell(2),t.renderCell(3))},t}return r=e,(t=a).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r,a}(n.a.PureComponent);var L=function(e){var t,r;function a(){for(var t,r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(t=e.call.apply(e,[this].concat(a))||this).render=function(){var e=t.props.waterMarkData.childImageSharp.fixed,r=e.base64,a=e.width,o=e.height,i=e.src,c=e.srcSet;return n.a.createElement(C.Group,{x:t.props.x,y:t.props.y},n.a.createElement(E,null),n.a.createElement(P,{name:t.props.category,x:20,y:45,base64:r,width:a/2,height:o/2,src:i,srcSet:c}))},t}return r=e,(t=a).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r,a}(n.a.PureComponent);L.defaultProps={x:0,y:0};var M=function(e){return n.a.createElement(c,null,function(t){return n.a.createElement(L,Object.assign({waterMarkData:t[e.category+"_watermark"]},e))})};var R=function(e){var t,r;function a(){for(var t,r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(t=e.call.apply(e,[this].concat(a))||this).renderSolvedSpadeDeck=function(){return t.renderDeck(0,"spade")},t.renderSolvedHeartDeck=function(){return t.renderDeck(1,"heart")},t.renderSolvedDiamondDeck=function(){return t.renderDeck(2,"diamond")},t.renderSolvedClubDeck=function(){return t.renderDeck(3,"club")},t.renderDeck=function(e,r){var a=t.props[r+"SolvedCards"],o=a.length>0?a[a.length-1]:null;return n.a.createElement(C.Group,{x:116*e,y:0},n.a.createElement(M,{category:r}),o&&n.a.createElement(I,{key:o.id,imageData:o.imageData}))},t.render=function(){return n.a.createElement(C.Group,{x:687,y:51},t.renderSolvedSpadeDeck(),t.renderSolvedHeartDeck(),t.renderSolvedDiamondDeck(),t.renderSolvedClubDeck())},t}return r=e,(t=a).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r,a}(n.a.PureComponent);R.defaultProps={spadeSolvedCards:[],heartSolvedCards:[],diamondSolvedCards:[],clubSolvedCards:[]};var N=R,T=(r(40),function(){function e(){}return e.isCardInStackDraggable=function(e,t){var r=this;return 0!==e.length&&(e.length===t+1||e.slice(t).every(function(e,t,a){if(a.length===t+1)return!0;var n=r.getCardColorAndNumber(e.id),o=n[0],i=n[1],c=r.getCardColorAndNumber(a[t+1].id),d=c[0],s=c[1];return o!==d&&i===s+1}))},e.getCardPosInPuzzleDeck=function(e,t){for(var r=0;r<e.length;r++)for(var a=0;a<e[r].length;a++)if(e[r][a].id===t)return[r,a];throw Error("Card not find in puzzle!")},e.getCardCategoryAndNumber=function(e){var t=e.split("_"),r=t[0],a=t[1];return[r,this.getCardNumber(a)]},e.getCardColorAndNumber=function(e){var t=e.split("_"),r=t[0],a=t[1];return[this.getCardColor(r),this.getCardNumber(a)]},e.getCardNumber=function(e){switch(e){case"k":return 13;case"q":return 12;case"j":return 11;case"a":return 1;default:return parseInt(e)}},e.getCardColor=function(e){switch(e){case"club":case"spade":return"black";case"heart":case"diamond":return"red";default:throw Error("Unknown card category!")}},e}());var G=function(e){var t,r;function a(){for(var t,r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(t=e.call.apply(e,[this].concat(a))||this).isCardDraggable=function(e){var r=t.props,a=r.dragDisabled,n=r.cards;return!a&&T.isCardInStackDraggable(n,e)},t.renderCards=function(){return t.props.cards.map(function(e,r){return n.a.createElement(I,{id:e.id,key:e.id,x:0,y:O*r,draggable:t.isCardDraggable(r)})})},t.render=function(){var e=t.props,r=e.x,a=e.y,o=e.setRef;return n.a.createElement(C.Group,Object.assign({x:r,y:a},o&&{ref:o}),t.renderCards())},t}return r=e,(t=a).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r,a}(n.a.PureComponent);G.defaultProps={x:0,y:0,dragDisabled:!1,cards:[]};var B=G;var Y=function(e){var t,r;function a(){for(var t,r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(t=e.call.apply(e,[this].concat(a))||this).componentDidUpdate=function(e){0===e.cards.length&&0!==t.props.cards.length&&t.draggingNode.startDrag()},t.setDraggingDeckRef=function(e){t.draggingNode=e},t.render=function(){var e=t.props,r=e.cards,a=e.x,o=e.y;return 0!==r.length&&n.a.createElement(B,{cards:r,x:a,y:o,dragDisabled:!0,setRef:t.setDraggingDeckRef})},t}return r=e,(t=a).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r,a}(n.a.PureComponent);Y.defaultProps={cards:[],x:0,y:0};var q=Y;var F=function(e){var t,r;function a(){for(var t,r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(t=e.call.apply(e,[this].concat(a))||this).renderStackedDecks=function(){return t.props.deckOfCards.map(function(e,r){return n.a.createElement(B,{key:r,cards:e,x:116*r,y:0,dragDisabled:t.props.dragDisabled})})},t.render=function(){var e=t.props,r=e.x,a=e.y;return n.a.createElement(C.Group,{x:r,y:a},t.renderStackedDecks())},t}return r=e,(t=a).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r,a}(n.a.PureComponent);F.defaultProps={x:179,y:234,deckOfCards:[],dragDisabled:!1};var H=F;var U=function(e){var t,r;function a(){for(var t,r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(t=e.call.apply(e,[this].concat(a))||this).state={dragDisabled:!1},t.getCanvasWidth=function(){return 1440},t.getCanvasHeight=function(){return 821},t.handlePuzzleLayerDragStart=function(e){var r=e.target.name(),a=T.getCardPosInPuzzleDeck(t.props.gameState,r),n=a[0],o=a[1],i=e.target.getClientRect(),c=i.x,d=i.y;t.props.moveCardsToDrag(n,o,{x:c,y:d})},t.handleDraggingLayerDragEnd=function(e){t.setState(function(){return{dragDisabled:!0}});var r=t.props.prevDraggingCardsPos,a=r.deckIndex,n=r.cardIndex,o=t.props.gameState[a][n-1],i=t.stageNode.findOne("."+o.id).getClientRect();e.target.to({x:i.x+A,y:i.y+O+A,duration:.15,easing:D.a.Easings.EaseOut,onFinish:function(){e.target.getChildren().each(function(e){e.to({duration:.45,easing:D.a.Easings.ElasticEaseOut,shadowOffsetX:0,shadowOffsetY:2,shadowBlur:A,shadowOpacity:.3})}),e.target.to({duration:.45,easing:D.a.Easings.ElasticEaseOut,scaleX:1,scaleY:1,onFinish:function(){t.setState(function(){return{dragDisabled:!1}}),t.props.moveDraggingCardsToPuzzle()}})}})},t.handleDraggingLayerDragStart=function(e){e.cancelBubble=!0,e.target.getChildren().each(function(e){e.setAttrs({shadowBlur:16,shadowOpacity:.4,shadowOffset:{x:0,y:4}})}),e.target.setAttrs({scaleX:1.05,scaleY:1.05})},t.setStageRef=function(e){return t.stageNode=e},t.render=function(){var e=t.props,r=e.gameState,a=e.draggingCards,o=e.draggingStartPos,i=t.state.dragDisabled;return n.a.createElement(c,null,function(e){return n.a.createElement(C.Stage,{width:t.getCanvasWidth(),height:t.getCanvasHeight(),ref:t.setStageRef},n.a.createElement(d,{imageData:e},n.a.createElement(C.Layer,{onDragStart:t.handlePuzzleLayerDragStart},n.a.createElement(z,null),n.a.createElement(N,null),n.a.createElement(H,{deckOfCards:r,dragDisabled:i})),n.a.createElement(C.Layer,{onDragStart:t.handleDraggingLayerDragStart,onDragEnd:t.handleDraggingLayerDragEnd},n.a.createElement(q,{cards:a,x:o.x,y:o.y}))))})},t}return r=e,(t=a).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r,a}(n.a.PureComponent);U.defaultProps={draggingStartPos:{x:0,y:0},draggingCards:[]};var W=U;function X(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var J=function(e){var t,r;function a(){for(var t,r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(t=e.call.apply(e,[this].concat(a))||this).state={gameState:[[{id:"heart_k"},{id:"club_2"},{id:"diamond_10"},{id:"heart_3"},{id:"heart_6"},{id:"spade_a"},{id:"spade_10"}],[{id:"diamond_2"},{id:"spade_7"},{id:"diamond_6"},{id:"spade_5"},{id:"club_10"},{id:"diamond_k"},{id:"heart_8"}],[{id:"spade_9"},{id:"heart_4"},{id:"club_q"},{id:"spade_4"},{id:"club_7"},{id:"spade_2"},{id:"club_9"}],[{id:"heart_a"},{id:"spade_8"},{id:"diamond_4"},{id:"heart_j"},{id:"heart_q"},{id:"diamond_9"},{id:"spade_q"}],[{id:"club_8"},{id:"diamond_q"},{id:"heart_9"},{id:"club_k"},{id:"spade_k"},{id:"diamond_a"}],[{id:"heart_10"},{id:"club_a"},{id:"diamond_7"},{id:"heart_2"},{id:"club_j"},{id:"spade_6"}],[{id:"club_6"},{id:"diamond_3"},{id:"heart_5"},{id:"diamond_j"},{id:"diamond_5"},{id:"heart_7"}],[{id:"spade_3"},{id:"diamond_8"},{id:"club_5"},{id:"club_3"},{id:"spade_j"},{id:"club_4"}]],history:[],draggingStartPos:{x:0,y:0},draggingCards:[],prevDraggingCardsPos:{deckIndex:0,cardIndex:0}},t.moveCardsToDrag=function(e,r,a){var n=t.state.gameState,o=n[e].slice(0,r),i=n[e].slice(r);t.setState(function(t){return{gameState:[].concat(X(t.gameState.slice(0,e)),[o],X(t.gameState.slice(e+1))),draggingCards:i,draggingStartPos:a,prevDraggingCardsPos:{deckIndex:e,cardIndex:r}}})},t.moveDraggingCardsToPuzzle=function(e){var r=t.state,a=r.gameState,n=r.draggingCards,o=r.prevDraggingCardsPos,i=e||o.deckIndex,c=a[i].concat(n);t.setState(function(e){return{gameState:[].concat(X(e.gameState.slice(0,i)),[c],X(e.gameState.slice(i+1)))}}),setTimeout(function(){return t.setState(function(){return{draggingCards:[],draggingStartPos:{x:0,y:0},prevDraggingCardsPos:{deckIndex:0,cardIndex:0}}})},0)},t.render=function(){var e=t.state,r=e.gameState,a=e.draggingStartPos,o=e.draggingCards,i=e.prevDraggingCardsPos;return n.a.createElement(W,{gameState:r,draggingStartPos:a,draggingCards:o,prevDraggingCardsPos:i,moveCardsToDrag:t.moveCardsToDrag,moveDraggingCardsToPuzzle:t.moveDraggingCardsToPuzzle})},t}return r=e,(t=a).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r,a}(n.a.PureComponent);r.d(t,"query",function(){return K});t.default=function(e){var t=e.data;return n.a.createElement(d,{imageData:t},n.a.createElement(g,{title:"Retro Free Cell"}),n.a.createElement(_,null),n.a.createElement(J,null))};var K="796128328"},228:function(e){e.exports={data:{site:{siteMetadata:{title:"Retro Free Cell",description:"復古風新接龍 | Designed by cyc",author:"@EasonChiang7178"}}}}}}]);
//# sourceMappingURL=component---src-pages-index-js-b46aaf5a851d546326fa.js.map