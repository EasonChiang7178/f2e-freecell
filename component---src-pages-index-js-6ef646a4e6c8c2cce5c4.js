(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{193:function(e,t,r){"use strict";r.r(t);var a=r(0),n=r.n(a);var o=n.a.createContext({}),i=o.Provider,c=o.Consumer,d=function(e){var t,r;function a(){for(var t,r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(t=e.call.apply(e,[this].concat(a))||this).render=function(){return n.a.createElement(i,{value:t.props.imageData},t.props.children)},t}return r=e,(t=a).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r,a}(n.a.PureComponent),s=r(229),u=r(230),l=r.n(u);function p(e){var t=e.description,r=e.lang,a=e.meta,o=e.title,i=s.data.site,c=t||i.siteMetadata.description;return n.a.createElement(l.a,{htmlAttributes:{lang:r},title:o,titleTemplate:"%s",meta:[{name:"description",content:c},{property:"og:title",content:o},{property:"og:description",content:c},{property:"og:type",content:"website"},{name:"twitter:card",content:"summary"},{name:"twitter:creator",content:i.siteMetadata.author},{name:"twitter:title",content:o},{name:"twitter:description",content:c}].concat(a)})}p.defaultProps={lang:"zh-TW",meta:[],description:""};var g=p,f=r(236),m=r(215),h={GREY:"#dbd3ca",RED:"#a93d2d",YELLOW:"#c99d31",BLACK:"#4d4d4d",BLUE:"#6ca39f"};function y(){var e=function(e,t){t||(t=e.slice(0));return e.raw=t,e}(["\n  @import url('https://fonts.googleapis.com/css?family=DM+Serif+Text&display=swap');\n  body {\n    font-family: 'DM Serif Text', -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Open Sans', 'Helvetica Neue', sans-serif;\n    background-color: ",";\n  }\n"]);return y=function(){return e},e}var v=Object(m.createGlobalStyle)(y(),h.GREY),_=function(e){var t,r;function a(){for(var t,r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(t=e.call.apply(e,[this].concat(a))||this).render=function(){return n.a.createElement(n.a.Fragment,null,n.a.createElement(f.Normalize,null),n.a.createElement(v,null))},t}return r=e,(t=a).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r,a}(n.a.PureComponent),C=(r(94),r(142),r(66),r(13),r(52),r(41),r(30),r(40),r(201)),b=r(258),D=r.n(b);r(211);var S=function(e){var t,r;function a(){for(var t,r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(t=e.call.apply(e,[this].concat(a))||this).render=function(){return n.a.createElement(C.Rect,{x:t.props.x,y:t.props.y,width:100,height:150,cornerRadius:5,fill:"transparent",stroke:h.BLACK,strokeWidth:1,opacity:.2})},t}return r=e,(t=a).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r,a}(n.a.PureComponent);S.defaultProps={x:0,y:0};var E=S;r(23),r(227),r(224);var w=function(e){var t,r;function a(){for(var t,r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(t=e.call.apply(e,[this].concat(a))||this).state={image:t.loadPlaceholder()},t.handleLoad=function(){t.setState({image:t.image})},t.handleMoveOver=function(){document.body.style.cursor="pointer"},t.handleMoveOut=function(){document.body.style.cursor="default"},t.render=function(){var e=t.props,r=e.name,a=e.x,o=e.y,i=e.width,c=e.height,d=e.draggable;return n.a.createElement(C.Image,Object.assign({name:r,x:a,y:o,width:i,height:c,image:t.state.image,draggable:d,ref:function(e){t.imageNode=e}},d&&{onMouseOver:t.handleMoveOver,onMouseOut:t.handleMoveOut,onDragStart:function(){},onDragEnd:function(){}}))},t}r=e,(t=a).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var o=a.prototype;return o.componentDidMount=function(){this.loadImage()},o.componentDidUpdate=function(e){var t=this;e.src!==this.props.src&&e.srcSet!==this.props.srcSet&&(this.loadImage(),this.props.base64&&this.setState(function(){return{placeholder:t.loadPlaceholder()}}))},o.componentWillUnmount=function(){this.image.removeEventListener("load",this.handleLoad)},o.loadPlaceholder=function(){if(!this.props.base64)return null;var e=new window.Image;return e.src=this.props.base64,e},o.loadImage=function(){this.image=new window.Image,this.image.src=this.props.src,this.image.srcSet=this.props.srcSet,this.image.addEventListener("load",this.handleLoad)},a}(n.a.PureComponent);w.defaultProps={x:0,y:0,draggable:!1};var x=w;var k=function(e){var t,r;function a(){for(var t,r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(t=e.call.apply(e,[this].concat(a))||this).render=function(){var e=t.props,r=e.id,a=e.x,o=e.y,i=e.draggable,c=t.props.imageData.childImageSharp.fixed,d=c.base64,s=c.width,u=c.height,l=c.src,p=c.srcSet;return n.a.createElement(x,{x:a,y:o,name:r,base64:d,width:s/2,height:u/2,src:l,srcSet:p,draggable:i})},t}return r=e,(t=a).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r,a}(n.a.PureComponent);k.defaultProps={x:0,y:0,draggable:!1};var P=function(e){return n.a.createElement(c,null,function(t){return n.a.createElement(k,Object.assign({imageData:t[e.id]},e))})};var O=function(e){var t,r;function a(){for(var t,r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(t=e.call.apply(e,[this].concat(a))||this).renderCell=function(e){var r=t.props["pos"+e+"Card"];return n.a.createElement(C.Group,{x:116*e,y:0},n.a.createElement(E,null),r&&n.a.createElement(P,{key:r.id,imageData:r.imageData}))},t.render=function(){return n.a.createElement(C.Group,{x:139,y:51},t.renderCell(0),t.renderCell(1),t.renderCell(2),t.renderCell(3))},t}return r=e,(t=a).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r,a}(n.a.PureComponent);var A=function(e){var t,r;function a(){for(var t,r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(t=e.call.apply(e,[this].concat(a))||this).render=function(){var e=t.props.waterMarkData.childImageSharp.fixed,r=e.base64,a=e.width,o=e.height,i=e.src,c=e.srcSet;return n.a.createElement(C.Group,{x:t.props.x,y:t.props.y},n.a.createElement(E,null),n.a.createElement(x,{x:20,y:45,base64:r,width:a/2,height:o/2,src:i,srcSet:c}))},t}return r=e,(t=a).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r,a}(n.a.PureComponent);A.defaultProps={x:0,y:0};var j=function(e){return n.a.createElement(c,null,function(t){return n.a.createElement(A,Object.assign({waterMarkData:t[e.category+"_watermark"]},e))})};var I=function(e){var t,r;function a(){for(var t,r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(t=e.call.apply(e,[this].concat(a))||this).renderSolvedSpadeDeck=function(){return t.renderDeck(0,"spade")},t.renderSolvedHeartDeck=function(){return t.renderDeck(1,"heart")},t.renderSolvedDiamondDeck=function(){return t.renderDeck(2,"diamond")},t.renderSolvedClubDeck=function(){return t.renderDeck(3,"club")},t.renderDeck=function(e,r){var a=t.props[r+"SolvedCards"],o=a.length>0?a[a.length-1]:null;return n.a.createElement(C.Group,{x:116*e,y:0},n.a.createElement(j,{category:r}),o&&n.a.createElement(P,{key:o.id,imageData:o.imageData}))},t.render=function(){return n.a.createElement(C.Group,{x:687,y:51},t.renderSolvedSpadeDeck(),t.renderSolvedHeartDeck(),t.renderSolvedDiamondDeck(),t.renderSolvedClubDeck())},t}return r=e,(t=a).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r,a}(n.a.PureComponent);I.defaultProps={spadeSolvedCards:[],heartSolvedCards:[],diamondSolvedCards:[],clubSolvedCards:[]};var z=I,L=(r(39),function(){function e(){}return e.isCardInStackDraggable=function(e,t){var r=this;return 0!==e.length&&(e.length===t+1||e.slice(t).every(function(e,t,a){if(a.length===t+1)return!0;var n=r.getCardColorAndNumber(e.id),o=n[0],i=n[1],c=r.getCardColorAndNumber(a[t+1].id),d=c[0],s=c[1];return o!==d&&i===s+1}))},e.getCardPosInPuzzleDeck=function(e,t){for(var r=0;r<e.length;r++)for(var a=0;a<e[r].length;a++)if(e[r][a].id===t)return[r,a];throw Error("Card not find in puzzle!")},e.getCardCategoryAndNumber=function(e){var t=e.split("_"),r=t[0],a=t[1];return[r,this.getCardNumber(a)]},e.getCardColorAndNumber=function(e){var t=e.split("_"),r=t[0],a=t[1];return[this.getCardColor(r),this.getCardNumber(a)]},e.getCardNumber=function(e){switch(e){case"k":return 13;case"q":return 12;case"j":return 11;case"a":return 1;default:return parseInt(e)}},e.getCardColor=function(e){switch(e){case"club":case"spade":return"black";case"heart":case"diamond":return"red";default:throw Error("Unknown card category!")}},e}()),M=32;var R=function(e){var t,r;function a(){for(var t,r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(t=e.call.apply(e,[this].concat(a))||this).isCardDraggable=function(e){return L.isCardInStackDraggable(t.props.cards,e)},t.renderCards=function(){return t.props.cards.map(function(e,r){return n.a.createElement(P,{id:e.id,key:e.id,x:0,y:M*r,draggable:t.isCardDraggable(r)})})},t.render=function(){var e=t.props,r=e.x,a=e.y,o=e.setRef;return n.a.createElement(C.Group,Object.assign({x:r,y:a},o&&{ref:o}),t.renderCards())},t}return r=e,(t=a).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r,a}(n.a.PureComponent);R.defaultProps={x:0,y:0,cards:[]};var N=R;var T=function(e){var t,r;function a(){for(var t,r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(t=e.call.apply(e,[this].concat(a))||this).componentDidUpdate=function(e){0===e.cards.length&&0!==t.props.cards.length&&t.draggingNode.startDrag()},t.setDraggingDeckRef=function(e){t.draggingNode=e},t.render=function(){var e=t.props,r=e.cards,a=e.x,o=e.y;return 0!==r.length&&n.a.createElement(N,{cards:r,x:a,y:o,setRef:t.setDraggingDeckRef})},t}return r=e,(t=a).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r,a}(n.a.PureComponent);T.defaultProps={cards:[],x:0,y:0};var G=T;var B=function(e){var t,r;function a(){for(var t,r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(t=e.call.apply(e,[this].concat(a))||this).renderStackedDecks=function(){return t.props.deckOfCards.map(function(e,t){return n.a.createElement(N,{key:t,cards:e,x:116*t,y:0})})},t.render=function(){var e=t.props,r=e.x,a=e.y;return n.a.createElement(C.Group,{x:r,y:a},t.renderStackedDecks())},t}return r=e,(t=a).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r,a}(n.a.PureComponent);B.defaultProps={x:179,y:234,deckOfCards:[]};var q=B;var F=function(e){var t,r;function a(){for(var t,r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(t=e.call.apply(e,[this].concat(a))||this).getCanvasWidth=function(){return 1440},t.getCanvasHeight=function(){return 821},t.handlePuzzleLayerDragStart=function(e){var r=e.target.name(),a=L.getCardPosInPuzzleDeck(t.props.gameState,r),n=a[0],o=a[1],i=e.target.getClientRect(),c=i.x,d=i.y;t.props.moveCardsToDrag(n,o,{x:c,y:d})},t.handleDraggingLayerDragEnd=function(e){var r=t.props.prevDraggingCardsPos,a=r.deckIndex,n=r.cardIndex,o=t.props.gameState[a][n-1],i=t.stageNode.findOne("."+o.id).getClientRect();e.target.to({x:i.x,y:i.y+M,duration:.15,easing:D.a.Easings.EaseOut,onFinish:function(){e.target.getChildren().each(function(e){e.to({duration:.6,easing:D.a.Easings.ElasticEaseOut,shadowOffsetX:0,shadowOffsetY:0,shadowBlur:0})}),e.target.to({duration:.6,easing:D.a.Easings.ElasticEaseOut,scaleX:1,scaleY:1,onFinish:function(){t.props.moveDraggingCardsToPuzzle()}})}})},t.handleDraggingLayerDragStart=function(e){e.cancelBubble=!0,e.target.getChildren().each(function(e){e.setAttrs({shadowColor:h.BLACK,shadowBlur:16,shadowOpacity:.4,shadowOffset:{x:0,y:4}})}),e.target.setAttrs({scaleX:1.05,scaleY:1.05})},t.setStageRef=function(e){return t.stageNode=e},t.render=function(){var e=t.props,r=e.gameState,a=e.draggingCards,o=e.draggingStartPos;return n.a.createElement(c,null,function(e){return n.a.createElement(C.Stage,{width:t.getCanvasWidth(),height:t.getCanvasHeight(),ref:t.setStageRef},n.a.createElement(d,{imageData:e},n.a.createElement(C.Layer,{onDragStart:t.handlePuzzleLayerDragStart},n.a.createElement(O,null),n.a.createElement(z,null),n.a.createElement(q,{deckOfCards:r})),n.a.createElement(C.Layer,{onDragStart:t.handleDraggingLayerDragStart,onDragEnd:t.handleDraggingLayerDragEnd},n.a.createElement(G,{cards:a,x:o.x,y:o.y}))))})},t}return r=e,(t=a).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r,a}(n.a.PureComponent);F.defaultProps={draggingStartPos:{x:0,y:0},draggingCards:[]};var U=F;function W(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var Y=function(e){var t,r;function a(){for(var t,r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(t=e.call.apply(e,[this].concat(a))||this).state={gameState:[[{id:"heart_k"},{id:"club_2"},{id:"diamond_10"},{id:"heart_3"},{id:"heart_6"},{id:"spade_a"},{id:"spade_10"}],[{id:"diamond_2"},{id:"spade_7"},{id:"diamond_6"},{id:"spade_5"},{id:"club_10"},{id:"diamond_k"},{id:"heart_8"}],[{id:"spade_9"},{id:"heart_4"},{id:"club_q"},{id:"spade_4"},{id:"club_7"},{id:"spade_2"},{id:"club_9"}],[{id:"heart_a"},{id:"spade_8"},{id:"diamond_4"},{id:"heart_j"},{id:"heart_q"},{id:"diamond_9"},{id:"spade_q"}],[{id:"club_8"},{id:"diamond_q"},{id:"heart_9"},{id:"club_k"},{id:"spade_k"},{id:"diamond_a"}],[{id:"heart_10"},{id:"club_a"},{id:"diamond_7"},{id:"heart_2"},{id:"club_j"},{id:"spade_6"}],[{id:"club_6"},{id:"diamond_3"},{id:"heart_5"},{id:"diamond_j"},{id:"diamond_5"},{id:"heart_7"}],[{id:"spade_3"},{id:"diamond_8"},{id:"club_5"},{id:"club_3"},{id:"spade_j"},{id:"club_4"}]],history:[],draggingStartPos:{x:0,y:0},draggingCards:[],prevDraggingCardsPos:{deckIndex:0,cardIndex:0}},t.moveCardsToDrag=function(e,r,a){var n=t.state.gameState,o=n[e].slice(0,r),i=n[e].slice(r);t.setState(function(t){return{gameState:[].concat(W(t.gameState.slice(0,e)),[o],W(t.gameState.slice(e+1))),draggingCards:i,draggingStartPos:a,prevDraggingCardsPos:{deckIndex:e,cardIndex:r}}})},t.moveDraggingCardsToPuzzle=function(e){var r=t.state,a=r.gameState,n=r.draggingCards,o=r.prevDraggingCardsPos,i=e||o.deckIndex,c=a[i].concat(n);t.setState(function(e){return{gameState:[].concat(W(e.gameState.slice(0,i)),[c],W(e.gameState.slice(i+1)))}}),setTimeout(function(){return t.setState(function(){return{draggingCards:[],draggingStartPos:{x:0,y:0},prevDraggingCardsPos:{deckIndex:0,cardIndex:0}}})},30)},t.render=function(){var e=t.state,r=e.gameState,a=e.draggingStartPos,o=e.draggingCards,i=e.prevDraggingCardsPos;return n.a.createElement(U,{gameState:r,draggingStartPos:a,draggingCards:o,prevDraggingCardsPos:i,moveCardsToDrag:t.moveCardsToDrag,moveDraggingCardsToPuzzle:t.moveDraggingCardsToPuzzle})},t}return r=e,(t=a).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r,a}(n.a.PureComponent);r.d(t,"query",function(){return H});t.default=function(e){var t=e.data;return n.a.createElement(d,{imageData:t},n.a.createElement(g,{title:"Retro Free Cell"}),n.a.createElement(_,null),n.a.createElement(Y,null))};var H="796128328"},229:function(e){e.exports={data:{site:{siteMetadata:{title:"Retro Free Cell",description:"復古風新接龍 | Designed by cyc",author:"@EasonChiang7178"}}}}}}]);
//# sourceMappingURL=component---src-pages-index-js-6ef646a4e6c8c2cce5c4.js.map